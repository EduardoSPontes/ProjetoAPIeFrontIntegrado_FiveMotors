@model FiveMotors.Models.Veiculo

@{
    ViewData["Title"] = $"{Model.Marca} {Model.Modelo}";
    Layout = "/Views/Shared/_Layout_Produtos.cshtml";
}

<style>
    body {
        background-color: #f5f5f5;
        font-family: 'Poppins', sans-serif;
    }

    .carro-container {
        max-width: 1200px;
        margin: 40px auto;
        padding: 20px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
        gap: 40px;
        align-items: start;
    }

    .galeria {
        position: relative;
    }

        .galeria img#mainImage {
            width: 100%;
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            transition: transform .3s ease;
        }

            .galeria img#mainImage:hover {
                transform: scale(1.02);
            }

    .miniaturas {
        display: flex;
        gap: 12px;
        justify-content: center;
        margin-top: 12px;
        flex-wrap: wrap;
    }

        .miniaturas img {
            width: 90px;
            height: 65px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all .2s ease;
        }

            .miniaturas img:hover {
                border: 2px solid #0CDAC3;
                transform: scale(1.05);
            }

    .detalhes {
        background: #fff;
        border-radius: 20px;
        box-shadow: 0 8px 24px rgba(0,0,0,.08);
        padding: 32px;
        animation: fadeIn .6s ease;
    }

        .detalhes h1 {
            font-size: 30px;
            font-weight: 600;
            margin-bottom: 6px;
            color: #111;
        }

        .detalhes p.desc {
            color: #666;
            font-size: 15px;
            margin-bottom: 16px;
        }

        .detalhes h2 {
            font-size: 28px;
            color: #0CDAC3;
            font-weight: 600;
            margin-bottom: 20px;
        }

    .detalhes-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px 16px;
        color: #444;
        font-size: 15px;
    }

    .botoes {
        margin-top: 28px;
        display: flex;
        gap: 14px;
        flex-wrap: wrap;
    }

        .botoes a {
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: 500;
            transition: .2s;
        }

    .btn-voltar {
        background: #f3f3f3;
        color: #333;
        border: 1px solid #ddd;
    }

        .btn-voltar:hover {
            background: #e0e0e0;
        }

    .btn-pagamento {
        background: linear-gradient(90deg, #0CDAC3, #089e8d);
        color: #fff;
        box-shadow: 0 4px 10px rgba(12,218,195,.3);
    }

        .btn-pagamento:hover {
            background: linear-gradient(90deg, #089e8d, #0CDAC3);
            transform: translateY(-2px);
        }

    /* Formulário */
    .formulario {
        max-width: 900px;
        margin: 50px auto;
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 6px 18px rgba(0,0,0,.08);
        padding: 30px;
    }

        .formulario h3 {
            margin-bottom: 20px;
            color: #333;
            font-weight: 600;
            font-size: 22px;
        }

        .formulario form {
            display: grid;
            gap: 14px;
        }

        .formulario input, .formulario textarea {
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #ccc;
            font-size: 15px;
            outline: none;
            transition: .2s;
        }

            .formulario input:focus, .formulario textarea:focus {
                border-color: #0CDAC3;
                box-shadow: 0 0 0 3px rgba(12,218,195,.15);
            }

        .formulario button {
            background: linear-gradient(90deg,#0CDAC3,#089e8d);
            color: #fff;
            border: none;
            padding: 14px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: .3s;
        }

            .formulario button:hover {
                background: linear-gradient(90deg,#089e8d,#0CDAC3);
                transform: translateY(-2px);
            }

    @@keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(15px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>


<!-- CONTEÚDO -->
<div class="carro-container">

    <!-- GALERIA DE IMAGENS -->
    <div class="galeria">
        <img id="mainImage" src="@Model.ImagemsVeiculo.FirstOrDefault()" alt="@Model.Modelo" />
        <div class="miniaturas">
            @foreach (var img in Model.ImagemsVeiculo)
            {
                <img src="@img" onclick="document.getElementById('mainImage').src='@img'" />
            }
        </div>
    </div>

    <!-- DETALHES -->
    <div class="detalhes">
        <h1>@Model.Marca @Model.Modelo</h1>
        <p class="desc">@Model.Descricao</p>
        <h2>R$ @Model.Preco.ToString("N0")</h2>

        <div class="detalhes-grid">
            <p><strong>Ano:</strong> @Model.Ano</p>
            <p><strong>Estoque:</strong> @Model.Estoque unidade(s)</p>
            <p><strong>Marca:</strong> @Model.Marca</p>
            <p><strong>Modelo:</strong> @Model.Modelo</p>
        </div>

        <div class="botoes">
            <a href="/ProdutosServicos/Index" class="btn-voltar">Voltar</a>
            <a asp-action="Pagamento"
               asp-route-id="@Model.VeiculosId"
               asp-route-clienteId="@ViewBag.ClienteId"
               class="btn-pagamento">
                Ver opções de pagamento 💳
            </a>
        </div>
    </div>
</div>

<!-- FORMULÁRIO DE CONTATO -->
<div class="formulario">
    <h3>Entre em contato com o vendedor</h3>
    <form id="formMensagem" method="post" asp-action="EnviarMensagem" asp-controller="Adm">
        <input type="text" id="nome" name="Nome" placeholder="Nome*" required />
        <input type="email" id="email"  name="Email" placeholder="E-mail*" required />
        <input type="tel" id="telefone" name="Telefone" placeholder="Telefone*" required />
        <textarea  id="assunto"  name="Assunto" placeholder="Olá, tenho interesse neste veículo. Por favor, entre em contato." required></textarea>
        <button type="submit">Enviar mensagem</button>
    </form>
</div>

<script>
    document.getElementById("formMensagem").addEventListener("submit", e => { e.preventDefault(); fetch("http://localhost:5206/api/FaleComVendedor", { method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify({Nome:document.getElementById("nome").value, Email:document.getElementById("email").value, Telefone:document.getElementById("telefone").value, Assunto:document.getElementById("assunto").value}) }); e.target.reset(); });
</script>

